<!DOCTYPE html>
<html lang="et">
<head>
  <meta charset="UTF-8">
  <title>Koolitööde tähtaegade meeldetuletaja</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f5f7fb; }
    h1 { color: #333; }
    .container { max-width: 800px; background: #fff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input { padding: 8px; width: 100%; box-sizing: border-box; margin-top: 5px; }
    button { padding: 10px 16px; margin-top: 15px; border: none; border-radius: 6px; background: #4f46e5; color: #fff; cursor: pointer; }
    button:hover { background: #4338ca; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f0f0f0; }
    .output { margin-top: 20px; padding: 15px; border-radius: 8px; background: #eef2ff; white-space: pre-line; }
    .warning { color: #b91c1c; font-weight: bold; }
    .today { color: #c2410c; font-weight: bold; }
    .soon { color: #1d4ed8; }
    .ok { color: #166534; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Koolitööde tähtaegade meeldetuletaja</h1>

    <p>Lisa töid ükshaaval ja kontrolli, kas mõni tähtaeg on lähedal.</p>

    <label>Töö nimi</label>
    <input type="text" id="nameInput" placeholder="Nt Matemaatika kodutöö">

    <label>Tähtaeg</label>
    <input type="date" id="dateInput">

    <label>Aine</label>
    <input type="text" id="subjectInput" placeholder="Nt Matemaatika">

    <button onclick="addAssignment()">Lisa töö</button>
    <button onclick="checkDeadlines()">Kontrolli tähtaegu</button>

    <table id="table">
      <thead>
        <tr>
          <th>Töö nimi</th>
          <th>Aine</th>
          <th>Tähtaeg</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="output" id="output"></div>
  </div>

  <script>
    const assignments = [];

    function addAssignment() {
      const name = document.getElementById("nameInput").value.trim();
      const date = document.getElementById("dateInput").value;
      const subject = document.getElementById("subjectInput").value.trim();

      if (!name || !date || !subject) {
        alert("Palun täida kõik väljad.");
        return;
      }

      assignments.push({ name, date, subject });
      updateTable();

      document.getElementById("nameInput").value = "";
      document.getElementById("dateInput").value = "";
      document.getElementById("subjectInput").value = "";
    }

    function updateTable() {
      const tbody = document.querySelector("#table tbody");
      tbody.innerHTML = "";

      for (let a of assignments) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${a.name}</td><td>${a.subject}</td><td>${a.date}</td>`;
        tbody.appendChild(tr);
      }
    }

    function parseDate(str) {
      const parts = str.split("-");
      return new Date(parts[0], parts[1] - 1, parts[2], 12, 0, 0);
    }

    function daysBetween(d1, d2) {
      const msPerDay = 1000 * 60 * 60 * 24;
      return Math.floor((d2 - d1) / msPerDay);
    }

    function checkDeadlines() {
      const outputDiv = document.getElementById("output");
      outputDiv.innerHTML = "";

      if (assignments.length === 0) {
        outputDiv.textContent = "Lisa enne vähemalt üks töö.";
        return;
      }

      const today = new Date();
      today.setHours(12, 0, 0, 0);

      let result = "Tähtaegade kontroll:\n\n";

      for (let a of assignments) {
        const dueDate = parseDate(a.date);
        const daysLeft = daysBetween(today, dueDate);

        if (daysLeft < 0) {
          result += `HOIATUS: ${a.name} (${a.subject}) tähtaeg on möödas!\n`;
        } else if (daysLeft === 0) {
          result += `MEELDETULETUS: ${a.name} (${a.subject}) tähtaeg on täna!\n`;
        } else if (daysLeft <= 2) {
          result += `MEELDETULETUS: ${a.name} (${a.subject}) tähtaeg on ${daysLeft} päeva pärast.\n`;
        } else {
          result += `${a.name} (${a.subject}) – aega veel ${daysLeft} päeva.\n`;
        }
      }

      outputDiv.textContent = result;
    }
  </script>
</body>
</html>
